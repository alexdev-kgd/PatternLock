pattern.addEventListener("mousedown",function(e){isHold=!0,pattern.addEventListener("mousemove",function(e){if(pattern.addEventListener("mouseleave",function(e){canvasObj.update(c,lines)}),mousePos=canvasObj.getMousePos(e),canvasObj.update(c,lines),isHold)if(null===idFirst)first=c.collision(e,offsetX,offsetY),void 0!==first&&(idFirst=first,dataFirst=c.getCircleData(idFirst),check=c.checking(idFirst),c.addToChecked(idFirst,check));else{if(lines.draw(dataFirst.x,dataFirst.y,mousePos.x,mousePos.y,ctx),second=c.collision(e,offsetX,offsetY),void 0!==second&&(idSecond=second),idSecond==idFirst&&(idSecond=null),void 0===idSecond||null===idSecond)return;dataSecond=c.getCircleData(idSecond),check=c.checking(idSecond),av_circle=lines.collision(e,c.getMatrix(),dataFirst.x,dataFirst.y,dataSecond.x,dataSecond.y),av_check=c.checking(av_circle),is_added=c.addToChecked(av_circle,av_check),av_circle=null,c.addToChecked(idSecond,check),check&&(lines.draw(dataFirst.x,dataFirst.y,dataSecond.x,dataSecond.y,ctx),lines.add(dataFirst.x,dataFirst.y,dataSecond.x,dataSecond.y),idFirst=null,idSecond=null,is_added=null)}})}),pattern.addEventListener("mouseup",function(e){if(isHold=!1,idFirst=null,idSecond=null,av_circle=null,c.isValid()){var t=document.getElementById("top"),d=document.getElementById("wrapper"),i=document.getElementById("success");t.style.transform=d.style.transform="translateY(1000px)",i.style.height="100%",transitionEvent&&d.addEventListener(transitionEvent,function(){t.style.display=d.style.display="none"})}else{var n=document.getElementById("err-text");messages.setMessage(n,"Incorrect, please, try again.",1500),messages.errAnimate(n,80,20)}c.clear(),lines.clear(),canvasObj.update(c)}),pattern.addEventListener("click",function(e){var t=c.collision(e,offsetX,offsetY);canvasObj.update(c),null!==timeout&&clearTimeout(timeout),ctx.globalCompositeOperation="destination-over",void 0!==t&&c.changeColor(t,"red",ctx),timeout=setTimeout(function(){canvasObj.update(c)},1500)});